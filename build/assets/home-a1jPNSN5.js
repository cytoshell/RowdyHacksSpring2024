import{r as o,u as F,j as t,c as N,d as U,A as V,a as z,b as G,C as J,F as b,e as K,S as M,B as p,f as L,g as P,h as Q,q as X,i as B,k as j,w as Y,l as Z,m as D,n as E,o as _,p as ee}from"./index-BmVCCMrq.js";const H=U("h4");H.displayName="DivStyledAsH4";const R=o.forwardRef(({className:n,bsPrefix:r,as:a=H,...i},l)=>(r=F(r,"alert-heading"),t.jsx(a,{ref:l,className:N(n,r),...i})));R.displayName="AlertHeading";const te=R,$=o.forwardRef(({className:n,bsPrefix:r,as:a=V,...i},l)=>(r=F(r,"alert-link"),t.jsx(a,{ref:l,className:N(n,r),...i})));$.displayName="AlertLink";const se=$,q=o.forwardRef((n,r)=>{const{bsPrefix:a,show:i=!0,closeLabel:l="Close alert",closeVariant:C,className:T,children:m,variant:u="primary",onClose:h,dismissible:d,transition:f=b,...x}=z(n,{show:"onClose"}),y=F(a,"alert"),w=G(v=>{h&&h(!1,v)}),g=f===!0?b:f,S=t.jsxs("div",{role:"alert",...g?void 0:x,ref:r,className:N(T,y,u&&`${y}-${u}`,d&&`${y}-dismissible`),children:[d&&t.jsx(J,{onClick:w,"aria-label":l,variant:C}),m]});return g?t.jsx(g,{unmountOnExit:!0,...x,ref:void 0,in:i,children:S}):i?S:null});q.displayName="Alert";const ae=Object.assign(q,{Link:se,Heading:te}),re=()=>{const[n]=K(Q),[r,a]=o.useState([]),[i,l]=o.useState(!1),[C,T]=o.useState(null),[m,u]=o.useState(null),[h,d]=o.useState(""),[f,x]=o.useState(""),[y,w]=o.useState(!1);o.useEffect(()=>((async()=>{if(l(!0),n)try{const s=X(B(j,"tasks"),Y("uid","==",n.uid)),k=(await Z(s)).docs.map(A=>({id:A.id,...A.data()}));a(k),l(!1)}catch(s){console.error("Error fetching tasks:",s),T("Error fetching tasks. Please try again later."),l(!1)}else a([]),l(!1)})(),()=>{a([])}),[n]);const g=async(e,s)=>{try{await D(E(j,"tasks",e),{completed:!s}),a(c=>c.map(k=>k.id===e?{...k,completed:!s}:k))}catch(c){console.error("Error updating task completion status:",c)}},S=(e,s)=>{u(e),d(s)},v=()=>{u(null),d("")},I=async()=>{try{await D(E(j,"tasks",m),{content:h}),a(e=>e.map(s=>s.id===m?{...s,content:h}:s)),u(null),d("")}catch(e){console.error("Error updating task content:",e)}},O=async()=>{try{const e={uid:n.uid,content:f,completed:!1},s=await _(B(j,"tasks"),e);a(c=>[...c,{id:s.id,...e}]),x(""),w(!1)}catch(e){console.error("Error adding new task:",e)}},W=async e=>{try{await ee(E(j,"tasks",e)),a(s=>s.filter(c=>c.id!==e))}catch(s){console.error("Error deleting task:",s)}};return t.jsxs("section",{className:"home",id:"home",children:[t.jsx("h1",{style:{color:"#F05A22",marginBottom:"20px",fontFamily:"Fira Sans"},children:n?"Tasks":t.jsxs(t.Fragment,{children:["Welcome to Rabid Tasker",t.jsx("br",{}),"Please log in to view your tasks"]})}),i&&t.jsx(M,{animation:"border",role:"status"}),C&&t.jsx(ae,{variant:"danger",children:C}),n&&t.jsx(p,{variant:"primary",onClick:()=>w(!0),style:{marginBottom:"10px"},children:"New Task"}),y&&t.jsxs("div",{style:{marginBottom:"10px"},children:[t.jsx(L.Control,{type:"text",placeholder:"Enter new task",value:f,onChange:e=>x(e.target.value),style:{flex:"1",fontFamily:"Fira Sans"}}),t.jsx(p,{variant:"success",onClick:O,style:{marginLeft:"10px"},children:"Submit"})]}),t.jsx("ul",{style:{listStyleType:"none"},children:r.map(e=>t.jsxs("li",{style:{display:"flex",alignItems:"center",marginBottom:"10px"},children:[t.jsx(P,{type:"checkbox",id:e.id,checked:e.completed,onChange:()=>g(e.id,e.completed),style:{marginRight:"10px"}}),m===e.id?t.jsx(L.Control,{type:"text",value:h,onChange:s=>d(s.target.value),style:{flex:"1",fontFamily:"Fira Sans"}}):t.jsx("h3",{className:"taskContent",style:{flex:"1",color:"#F05A22",fontFamily:"Fira Sans",marginBottom:"0"},children:e.content}),m===e.id?t.jsxs(t.Fragment,{children:[t.jsx(p,{variant:"success",onClick:I,style:{marginLeft:"10px"},children:"Submit"}),t.jsx(p,{variant:"danger",onClick:v,style:{marginLeft:"10px"},children:"Cancel"})]}):t.jsxs(t.Fragment,{children:[t.jsx(p,{variant:"info",onClick:()=>S(e.id,e.content),style:{marginLeft:"10px"},children:"Edit"}),t.jsx(p,{variant:"danger",onClick:()=>W(e.id),style:{marginLeft:"10px"},children:"Delete"})]})]},e.id))})]})};export{re as default};
